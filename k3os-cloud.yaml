# cloud-config
hostname: shawn-local-2
write_files:
- patch: /var/lib/connman/default.config
  content: |-
    [service_eth0]
    Type = ethernet
    IPv4 = 172.16.10.248/255.255.255.0/172.16.10.250
    IPv6 = off
    Nameservers = 172.16.10.250
    SearchDomains = chlover.local
    Domain = chlover.local
    TimeServers = ntp.aliyun.com, time1.cloud.tencent.com, 0.cn.pool.ntp.org
- patch: /var/lib/rancher/k3s/agent/etc/containerd/config.toml.tmpl
  content: |-
    [plugins.opt]
    path = "{{ .NodeConfig.Containerd.Opt }}"

    [plugins.cri]
    stream_server_address = "{{ .NodeConfig.AgentConfig.NodeName }}"
    stream_server_port = "10010"
      [plugins.cri.cni]
        bin_dir = "{{ .NodeConfig.AgentConfig.CNIBinDir }}"
        conf_dir = "{{ .NodeConfig.AgentConfig.CNIConfDir }}"

    [plugins.cri.registry.mirrors]
      [plugins.cri.registry.mirrors."docker.io"]
        endpoint = ["http://f1361db2.m.daocloud.io"]
ssh_authorized_keys:
- ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDeJiOJcZHItmnRJNXBzsNiohUKpqrbUCvnOQ8U27ey/Yrcex93Cfr/mcPA4uOgPIb/W5BVwX2fkVOE9+DKEM2bYT9CxJ31SjntnfVMyHBmBiw0Wg3XsNWNOudOuhnZXdWBMW0rZJqV0phLGodKQeBWimM6gSijPerHu9B5bv5VceO54r8BL7/nZ+8z5SZ4yrS4m8G3ofU1qKrxFB3WPeGy15PTNwwLkStdeb2kYGJ3hJdkBwvNTPBfl7j3JlAVOXWgSNKXBZrSnl+9VzLJd+0y3Fa8vbl46WPE5W0FSseeHXn5cacSNL0PX2ArKYlPxEs6ZZqEGOJx27Ej94Me7coNlUU7ntHjs8fAEjTqcC+Rcv/PMo3fH7XDS1Y+CwB1j/BPZ6aZqJrEiSkTWYqjE7mBNEbKJ5PkFzA7BUxKO3D2eBfWjylvsPciFlxDyUJKYVsErbOuWIBsHBE23300/wwXK9wZqm6y6XWkX6ItVO923N3vOTRrpJ39UyAQV+qveis= Administrator@YWZMVWW06YXA1XB
boot_cmd:
- "echo Asia/Shanghai > /etc/timezone"
k3os:
  data_sources:
  - aws
  - cdrom
  password: p@ssw0rd
  ntp_servers:
  - ntp.aliyun.com
  - time1.cloud.tencent.com
  - 0.cn.pool.ntp.org
  dns_nameservers:
  - 192.168.100.240
  - 223.5.5.5
  token: SHAWN_HOME_LOCAL_CLUSTER
  k3s_args:
  - server
  environment:
    http_proxy: http://192.168.100.240:7890
    https_proxy: http://192.168.100.240:7890
